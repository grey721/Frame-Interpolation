# 原数据

F0 F0 F0 F0 F0 F0 F0 E5    00 00 00 00 00 00 00 00

40 42 0F 00 00 00 00 00  16 00 00 00 DD 00 00 00

00 84 03 00 30 03 64 02    00 00 00 00 00 00 00 00

F0 E7 01 00 40 E8 01 00    00 00 00 00 40 00 00 00

FF FF 00 B7 24 9C 26 00    00 64 02 C0 0C 00 49 00

FF FF 00 1C 2A 9C 26 00    00 64 02 C0 0C 10 49 00

FF FF 00 81 2F 9C 26 00     00 64 02 C0 0C 20 49 00

FF FF 00 E6 34 9C 26 00     00 64 02 C0 0C 30 49 00

00 00 00 80 00 00 00 00    00 00 00 00 00 00 00 00

00 00 00 00 00 20 00 00    00 00 00 00 00 00 00 00

00 00 00 00 00 00 00 00    00 00 01 00 00 00 00 00

……

F1 F1 F1 F1 F1 F1 F1 E5

---

# 头部数据（基于手册  7.数据结构说明）

## 分析

---

F0 F0 F0 F0 F0 F0 F0 E5 （起始）		    00 00 00 00 00 00 00 00（TimeStamp，EVS预留）

40 42 0F 00 00 00 00 00 （GapInfo）	    16 00 00 00 DD 00 00 00（FrameInfo）

00 84 03 00 30 03 64 02（DataType）	  00 00 00 00 00 00 00 00（ALS）

F0 E7 01 00 40 E8 01 00（LengthInfo）	00 00 00 00 40 00 00 00（未知，FillInfo？高32位正好124 848+64=124 912）

---

FF FF 00 B7 24 9C 26 00				   00 64 02 C0 0C 00 49 00

FF FF 00 1C 2A 9C 26 00  				 00 64 02 C0 0C 10 49 00			（已知并非数据）

FF FF 00 81 2F 9C 26 00 			  	00 64 02 C0 0C 20 49 00			（参数功能未知）

FF FF 00 E6 34 9C 26 00  				 00 64 02 C0 0C 30 49 00

---

00 00 00 80 00 00 00 00    00 00 00 00 00 00 00 00

00 00 00 00 00 20 00 00    00 00 00 00 00 00 00 00			（实际数据）

00 00 00 00 00 00 00 00    00 00 01 00 00 00 00 00

……

---

F1 F1 F1 F1 F1 F1 F1 E5（结束）

---

TimeStamp：**在uint64中表示**：固定需要**64位**（因为uint64是固定大小类型）。

GapInfo：32bit + 32bit

FrameInfo：32bit + 32bit

DataType:：32bit + 32bit

ALS：32bit + 32bit

LengthInfo：32bit + 32bit

结束：F1 F1 F1 F1 F1 F1 F1 E5

FillInfo：32bit + 32bit



## 验证

**起始：**

- F0 F0 F0 F0 F0 F0 F0 E5  =(小端序)》 E5 F0 F0 F0 F0 F0 F0 F0 √

**TimeStamp：**

- EVS预留，全零 √

**GapInfo：**

- 高32位：
  - 预留，全零 √
- 低32位：
  - 40 42 0F 00  =(小端序)》 0x000F4240   =(16转10)》 1000000
  - 一个clk时间为 $\frac {1}{1000000}s = 1 \mu s$

**FrameInfo：**

- 高32位：
  -  DD 00 00 00  =(小端序)》 0xDD   =(16转10)》 221 （子帧时间 $221 \mu s$ ）？
- 低32位：
  - 16 00 00 00  =(小端序)》 0x16   =(16转2)》 10110 （灵敏度挡位？）

**DataType：**

- 高32位：

  - 64 02  =(小端序)》 0x0264   =(16转10)》 612（H）√

  - 30 03  =(小端序)》 0x0330   =(16转10)》 816（W）√

- 低32位：

  - 00 84 03 00  =(小端序)》 0x00038400  =》 normal_2bit模式 √

  - 0x00038410  =(小端序)》 DVS Event Mode 16 pixel

**LengthInfo：**

- 高32位：
  - 40 E8 01 00  =(小端序)》 0x0001E840  =(16转10)》 124992（帧结构长度）
  - FrameStructLen 里还要额外加上**全部**的对齐填充和尾部 CRC？硬件对齐用？
  - 帧数据长度仍然是info.txt中的length=124984
- 低32位：
  - F0 E7 01 00  =(小端序)》0x0001E7F0  =(16转10)》 124912（FPGAData 、sensor 数据长度、有效数据长度）
  -   $124912 != \frac {H \times W}{4} = \frac {612 \times 816}{4} = 124848$
  - FPGA 把 612×816 的 2 bit 像素数据（共 124 848 B）打包，再加上前 64 B 的头部，正好是 124 912 B ？有效数据长度？

**结束：**

- F1 F1 F1 F1 F1 F1 F1 E5  =(小端序)》 E5 F1 F1 F1 F1 F1 F1 F1 √

---

### 注

16进制-》4位

1字节-》8位-》2个16进制数

